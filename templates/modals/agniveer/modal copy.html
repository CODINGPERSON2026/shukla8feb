<style>
    /* Styling for table headers and cells */
    #agniveerTableBody th,
    #agniveerTableBody td {
      padding: 12px 15px !important;     /* More breathing space */
      text-align: center;                /* Center align all content */
      vertical-align: middle;            /* Vertically center text */
      font-size: 0.95rem;                /* Slightly smaller but readable */
    }
  
    /* Header specific styles */
    #agniveerTableBody th {
      background-color: #0d6efd;         /* Bootstrap primary blue */
      color: white;                      /* White text for contrast */
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      position: sticky;
      top: 0;
      z-index: 1;
    }
  
    /* Alternating row colors for better readability */
    #agniveerTableBody tr:nth-child(even) {
      background-color: #f8f9fa;         /* Light gray */
    }
  
    /* Hover effect on rows */
    #agniveerTableBody tr:hover {
      background-color: #e3f2fd !important; /* Light blue on hover */
      transition: background-color 0.2s ease;
      cursor: pointer;
    }
  
    /* Army Number column - left align and bold */
    #agniveerTableBody td:nth-child(1) {
      text-align: left;
      font-weight: 600;
      color: #1976d2;
    }
  
    /* Name column - left align */
    #agniveerTableBody td:nth-child(2) {
      text-align: left;
      font-weight: 500;
    }
  
    /* Make table more compact on small screens */
    @media (max-width: 768px) {
      #agniveerTableBody th,
      #agniveerTableBody td {
        padding: 8px 10px !important;
        font-size: 0.85rem;
      }
    }
  </style>




<div class="modal fade" id="agniveersModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content">
  
        <div class="modal-header">
          <h5 class="modal-title">Agniveer Personnel</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
  
        <div class="modal-body">
  
          <!-- Batch Filter -->
          <div class="row mb-3">
            <div class="col-md-4">
              <label class="form-label">Select Batch</label>
              <select id="batchFilter" class="form-select">
                <option value="ALL" selected>All</option> <!-- added 'selected' -->
                <option value="Batch 1">Batch 1</option>
                <option value="Batch 2">Batch 2</option>
                <option value="Batch 4">Batch 4</option>
                <option value="Batch 5">Batch 5</option>
                <option value="Batch 6">Batch 6</option>
                <option value="Batch 7">Batch 7</option>
                <option value="Batch 8">Batch 8</option>
                
                
              </select>
            </div>
          </div>
  
          <!-- Table -->
          <div class="table-responsive">
            <table class="table table-sm table-bordered table-hover">
              <thead class="table-light">
                <tr>
                  <th>Army No</th>
                  <th>Name</th>
                  <th>Batch</th>
                  <th>Asst Test</th>
                  <th> Next Asst Test Dt</th>
                  <th>Company</th>
                  <th>Section</th>
                </tr>
              </thead>
              <tbody id="agniveerTableBody">
                <tr>
                  <td colspan="5" class="text-center text-muted">
                    Select a batch
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
  
        </div>
      </div>
    </div>
  </div>
  <script>
    document.getElementById('batchFilter').addEventListener('change', function () {
      const batch = this.value;
    
      fetch(`/get_all_agniveers?batch=${batch}`)
        .then(res => res.json())
        .then(data => {
          const tbody = document.getElementById('agniveerTableBody');
          tbody.innerHTML = '';
    
          if (data.length === 0) {
            tbody.innerHTML = `
              <tr>
                <td colspan="5" class="text-center text-muted">No records found</td>
              </tr>`;
            return;
          }
    
          data.forEach(p => {
            tbody.innerHTML += `
              <tr>
                <td>${p.army_number}</td>
                <td>${p.name}</td>
                
                <td>${p.batch}</td>
                <td>${p.asst_test}</td>
                <td>${p.next_asst_test_dt}</td>
                
                <td>${p.company}</td>
                <td>${p.section}</td>

              </tr>`;
          });
        });
    });
    document.getElementById('batchFilter').addEventListener('change', function () {
        const batch = this.value;
    
        fetch(`/get_all_agniveers?batch=${batch}`)
          .then(res => res.json())
          .then(data => {
            const tbody = document.getElementById('agniveerTableBody');
            tbody.innerHTML = '';
    
            if (data.length === 0) {
              tbody.innerHTML = `
                <tr>
                  <td colspan="5" class="text-center text-muted">No records found</td>
                </tr>`;
              return;
            }
    
            data.forEach(p => {
              tbody.innerHTML += `
                <tr>
                  <td>${p.army_number}</td>
                  <td>${p.name}</td>
                  <td>${p.batch}</td>
                  <td>${p.asst_test}</td>
                  <td>${p.next_asst_test_dt}</td>
                  <td>${p.company}</td>
                  <td>${p.section}</td>
                  
                </tr>`;
            });
          });
      });
    
      // NEW: Trigger the fetch automatically when modal opens
      const agniveersModal = document.getElementById('agniveersModal');
      agniveersModal.addEventListener('shown.bs.modal', function () {
        const batchFilter = document.getElementById('batchFilter');
        // Ensure "All" is selected and trigger the change event
        batchFilter.value = 'ALL';
        batchFilter.dispatchEvent(new Event('change'));
      });
    </script>
      